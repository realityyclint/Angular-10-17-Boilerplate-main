"use strict";(self.webpackChunkangular_10_17_updated_boilerplate=self.webpackChunkangular_10_17_updated_boilerplate||[]).push([[271],{271:(D,_,c)=>{c.r(_),c.d(_,{DepartmentsModule:()=>S});var s=c(6895),l=c(433),u=c(7784),e=c(8256),p=c(5631),g=c(7110),m=c(1585);function b(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",20),e._uU(2),e.TgZ(3,"button",8),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.alertService.clear())}),e.qZA()(),e.BQk()}if(2&n){const t=a.ngIf;e.xp6(1),e.Gre("alert alert-",t.type," alert-dismissible fade show"),e.xp6(1),e.hij(" ",t.message," ")}}function v(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancel())}),e.qZA(),e.TgZ(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"h5",7),e._uU(7),e.qZA(),e.TgZ(8,"button",8),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancel())}),e.qZA()(),e.TgZ(9,"div",9),e.YNc(10,b,4,4,"ng-container",10),e.ALo(11,"async"),e.TgZ(12,"div",11)(13,"label",12),e._uU(14,"Name"),e.qZA(),e.TgZ(15,"input",13),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.department.name=o)}),e.qZA()(),e.TgZ(16,"div",11)(17,"label",12),e._uU(18,"Description"),e.qZA(),e.TgZ(19,"input",14),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.department.description=o)}),e.qZA()()(),e.TgZ(20,"div",15)(21,"button",16),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.save())}),e._UZ(22,"i",17),e._uU(23," Save "),e.qZA(),e.TgZ(24,"button",18),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancel())}),e._UZ(25,"i",19),e._uU(26," Cancel "),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(7),e.hij(" ",t.id?"Edit":"Add"," Department "),e.xp6(3),e.Q6J("ngIf",e.lcZ(11,4,t.alertService.alert)),e.xp6(5),e.Q6J("ngModel",t.department.name),e.xp6(4),e.Q6J("ngModel",t.department.description)}}let d=(()=>{class n{constructor(t,i){this.departmentService=t,this.alertService=i,this.showModal=!1,this.selectedDepartment=null,this.cancelEvent=new e.vpe,this.saveEvent=new e.vpe,this.department={name:"",description:""},this.isNew=!0}ngOnChanges(t){t.selectedDepartment&&(this.selectedDepartment?(this.isNew=!1,this.department=Object.assign({},this.selectedDepartment)):(this.isNew=!0,this.department={name:"",description:""}))}save(){this.alertService.clear(),this.department.name.trim()?this.isNew?this.departmentService.create(this.department).subscribe({next:()=>{this.alertService.success("Department created successfully"),this.saveEvent.emit()},error:t=>this.alertService.error("Creation failed: "+t.message)}):this.departmentService.update(this.department.id,this.department).subscribe({next:()=>{this.alertService.success("Department updated successfully"),this.saveEvent.emit()},error:t=>this.alertService.error("Update failed: "+t.message)}):this.alertService.error("Name is required")}cancel(){this.alertService.clear(),this.cancelEvent.emit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.n),e.Y36(m.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-department-modal"]],inputs:{showModal:"showModal",selectedDepartment:"selectedDepartment"},outputs:{cancelEvent:"cancelEvent",saveEvent:"saveEvent"},features:[e.TTD],decls:1,vars:1,consts:[["class","modal-backdrop-wrapper",4,"ngIf"],[1,"modal-backdrop-wrapper"],[1,"custom-backdrop",3,"click"],["tabindex","-1","role","dialog","aria-modal","true","aria-labelledby","departmentModalLabel",1,"modal","fade","show","d-block"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","rounded-4","shadow"],[1,"modal-header","bg-primary","text-white","rounded-top-4"],["id","departmentModalLabel",1,"modal-title","fw-semibold"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","bg-light","p-4"],[4,"ngIf"],[1,"mb-4"],[1,"form-label","fw-semibold"],["type","text","placeholder","Enter department name",1,"form-control","form-control-lg","rounded-3",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter short description",1,"form-control","form-control-lg","rounded-3",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"btn","btn-success","fw-semibold","px-4","shadow-sm",3,"click"],[1,"bi","bi-check-circle","me-1"],[1,"btn","btn-outline-secondary","px-4","fw-semibold","shadow-sm",3,"click"],[1,"bi","bi-x-circle","me-1"],["role","alert"]],template:function(t,i){1&t&&e.YNc(0,v,27,6,"div",0),2&t&&e.Q6J("ngIf",i.showModal)},dependencies:[s.O5,l.Fj,l.JJ,l.On,s.Ov],encapsulation:2}),n})();function f(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.add())}),e._UZ(1,"i",15),e._uU(2," Add Department "),e.qZA()}}function h(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",16),e._uU(2),e.TgZ(3,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.alertService.clear())}),e.qZA()(),e.BQk()}if(2&n){const t=a.ngIf;e.xp6(1),e.Gre("alert alert-",t.type," alert-dismissible fade show"),e.xp6(1),e.hij(" ",t.message," ")}}function x(n,a){1&n&&(e.ynx(0),e.TgZ(1,"div",18)(2,"div",19)(3,"span",20),e._uU(4,"Loading..."),e.qZA()()(),e.BQk())}function Z(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(4);return e.KtG(r.edit(o.id))}),e._UZ(1,"i",30),e._uU(2," Edit "),e.qZA()}}function C(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(4);return e.KtG(r.delete(o.id))}),e._UZ(1,"i",32),e._uU(2," Delete "),e.qZA()}}function T(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e.YNc(9,Z,3,0,"button",27),e.YNc(10,C,3,0,"button",28),e.qZA()()),2&n){const t=a.$implicit,i=e.oxw(4);e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.employeeCount),e.xp6(2),e.Q6J("ngIf","Admin"===i.account.role),e.xp6(1),e.Q6J("ngIf","Admin"===i.account.role)}}function w(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",22)(2,"table",23)(3,"thead",24)(4,"tr")(5,"th"),e._uU(6,"Name"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Description"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Employee Count"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Actions"),e.qZA()()(),e.TgZ(13,"tbody",25),e.YNc(14,T,11,5,"tr",26),e.qZA()()(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(14),e.Q6J("ngForOf",t.departments)}}function A(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"button",42),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(4);return e.KtG(r.edit(o.id))}),e._UZ(2,"i",30),e._uU(3," Edit "),e.qZA(),e.TgZ(4,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(4);return e.KtG(r.delete(o.id))}),e._UZ(5,"i",32),e._uU(6," Delete "),e.qZA()()}}function M(n,a){if(1&n&&(e.TgZ(0,"div",35)(1,"div",36)(2,"div",37)(3,"h5",38),e._UZ(4,"i",39),e._uU(5),e.qZA(),e.TgZ(6,"p",40),e._uU(7),e.qZA(),e.TgZ(8,"p",41),e._uU(9),e.qZA(),e.YNc(10,A,7,0,"div",10),e.qZA()()()),2&n){const t=a.$implicit,i=e.oxw(4);e.xp6(5),e.hij("",t.name," "),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.hij("Employees: ",t.employeeCount,""),e.xp6(1),e.Q6J("ngIf","Admin"===i.account.role)}}function y(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",33),e.YNc(2,M,11,4,"div",34),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("ngForOf",t.departments)}}function k(n,a){if(1&n&&(e.ynx(0),e.YNc(1,w,15,1,"ng-container",10),e.YNc(2,y,3,1,"ng-container",10),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","table"===t.viewMode),e.xp6(1),e.Q6J("ngIf","card"===t.viewMode)}}function E(n,a){1&n&&(e.TgZ(0,"div",44),e._UZ(1,"i",45),e._uU(2,"No departments found. "),e.qZA())}function U(n,a){if(1&n&&(e.YNc(0,k,3,2,"ng-container",11),e.YNc(1,E,3,0,"ng-template",null,21,e.W1O)),2&n){const t=e.MAs(2),i=e.oxw();e.Q6J("ngIf",(null==i.departments?null:i.departments.length)>0)("ngIfElse",t)}}const N=[{path:"",component:(()=>{class n{constructor(t,i,o){this.departmentService=t,this.accountService=i,this.alertService=o,this.departments=[],this.isLoading=!1,this.viewMode="table",this.showModal=!1,this.selectedDepartment=null}ngOnInit(){this.account=this.accountService.accountValue;const t=localStorage.getItem("departmentViewMode");this.viewMode=t??"table",this.loadDepartments()}setViewMode(t){this.viewMode=t,localStorage.setItem("departmentViewMode",t)}loadDepartments(){this.isLoading=!0,this.departmentService.getAll().subscribe({next:t=>{this.departments=t,this.isLoading=!1},error:t=>{this.isLoading=!1,this.alertService.error("Failed to load departments: "+t.message)}})}add(){this.selectedDepartment={name:"",description:"",employeeCount:0},this.showModal=!0}edit(t){this.departmentService.getById(t).subscribe({next:i=>{this.selectedDepartment=Object.assign({},i),this.showModal=!0},error:i=>{this.alertService.error("Failed to load department: "+i.message)}})}delete(t){confirm("Are you sure you want to delete this department?")&&this.departmentService.delete(t).subscribe({next:()=>{this.alertService.success("Department deleted successfully"),this.loadDepartments()},error:i=>{this.alertService.error("Delete failed: "+i.message)}})}onCancel(){this.showModal=!1,this.selectedDepartment=null}onSave(t){t.id?this.departmentService.update(t.id,t).subscribe({next:()=>{this.alertService.success("Department updated successfully"),this.showModal=!1,this.loadDepartments()},error:i=>{this.alertService.error("Update failed: "+i.message)}}):this.departmentService.create(t).subscribe({next:()=>{this.alertService.success("Department created successfully"),this.showModal=!1,this.loadDepartments()},error:i=>{this.alertService.error("Creation failed: "+i.message)}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.n),e.Y36(g.B),e.Y36(m.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-department-list"]],decls:18,vars:12,consts:[[1,"container","my-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"fw-bold","text-primary"],[1,"bi","bi-diagram-3","me-2"],["role","group","aria-label","Display options",1,"btn-group"],[1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-table"],[1,"bi","bi-grid-3x3-gap"],[1,"mt-4","text-end"],["class","btn btn-success",3,"click",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["contentSection",""],[3,"showModal","selectedDepartment","cancelEvent","saveEvent"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-plus-circle","me-2"],["role","alert"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"text-center","my-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["noDepartments",""],[1,"table-responsive","shadow","rounded-4","animate__animated","animate__fadeIn"],[1,"table","table-hover","align-middle","mb-0","bg-white","rounded-4","overflow-hidden"],[1,"table-dark","text-center"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","btn btn-outline-primary px-3 py-1 me-2",3,"click",4,"ngIf"],["class","btn btn-outline-danger px-3 py-1",3,"click",4,"ngIf"],[1,"btn","btn-outline-primary","px-3","py-1","me-2",3,"click"],[1,"bi","bi-pencil-square","me-1"],[1,"btn","btn-outline-danger","px-3","py-1",3,"click"],[1,"bi","bi-trash","me-1"],[1,"row","g-3","animate__animated","animate__fadeIn"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"card","shadow-sm","border-0","h-100"],[1,"card-body"],[1,"card-title","text-primary"],[1,"bi","bi-building","me-2"],[1,"card-text"],[1,"text-muted","small","mb-2"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"text-center","text-muted","py-4"],[1,"bi","bi-info-circle","me-2"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._UZ(3,"i",3),e._uU(4,"Departments "),e.qZA(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return i.viewMode="table"}),e._UZ(7,"i",6),e.qZA(),e.TgZ(8,"button",5),e.NdJ("click",function(){return i.viewMode="card"}),e._UZ(9,"i",7),e.qZA()(),e.TgZ(10,"div",8),e.YNc(11,f,3,0,"button",9),e.qZA()(),e.YNc(12,h,4,4,"ng-container",10),e.ALo(13,"async"),e.YNc(14,x,5,0,"ng-container",11),e.YNc(15,U,3,2,"ng-template",null,12,e.W1O),e.qZA(),e.TgZ(17,"app-department-modal",13),e.NdJ("cancelEvent",function(){return i.onCancel()})("saveEvent",function(r){return i.onSave(r)}),e.qZA()),2&t){const o=e.MAs(16);e.xp6(6),e.ekj("active","table"===i.viewMode),e.xp6(2),e.ekj("active","card"===i.viewMode),e.xp6(3),e.Q6J("ngIf","Admin"===i.account.role),e.xp6(1),e.Q6J("ngIf",e.lcZ(13,10,i.alertService.alert)),e.xp6(2),e.Q6J("ngIf",i.isLoading)("ngIfElse",o),e.xp6(3),e.Q6J("showModal",i.showModal)("selectedDepartment",i.selectedDepartment)}},dependencies:[s.sg,s.O5,d,s.Ov],encapsulation:2}),n})()},{path:"add",component:d},{path:"edit/:id",component:d}];let S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[s.ez,l.u5,l.UX,u.Bz.forChild(N)]}),n})()}}]);