"use strict";(self.webpackChunkangular_10_17_updated_boilerplate=self.webpackChunkangular_10_17_updated_boilerplate||[]).push([[774],{1774:(B,d,r)=>{r.r(d),r.d(d,{RequestsModule:()=>G});var a=r(6895),_=r(433),u=r(7784),e=r(8256),m=r(8219),b=r(7110),p=r(1585);function q(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",14),e._uU(2),e.TgZ(3,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.alertService.clear())}),e.qZA()(),e.BQk()}if(2&n){const t=s.ngIf;e.xp6(1),e.Gre("alert alert-",t.type," alert-dismissible fade show"),e.xp6(1),e.hij(" ",t.message," ")}}function v(n,s){1&n&&(e.ynx(0),e.TgZ(1,"div",16)(2,"div",17)(3,"span",18),e._uU(4,"Loading..."),e.qZA()()(),e.BQk())}function h(n,s){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"span",32),e._uU(3),e.qZA()()),2&n){const t=s.$implicit;e.xp6(1),e.hij(" ",t.name," "),e.xp6(2),e.hij("(x",t.quantity,")")}}function Z(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,l=e.oxw(4);return e.KtG(l.edit(o.id))}),e._uU(1," Edit "),e.qZA()}}function x(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,l=e.oxw(4);return e.KtG(l.delete(o.id))}),e._uU(1," Delete "),e.qZA()}}const g=function(n,s,t){return{"bg-success":n,"bg-warning text-dark":s,"bg-danger":t}};function A(n,s){if(1&n&&(e.TgZ(0,"tr",22)(1,"td",24),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",25)(6,"ul",26),e.YNc(7,h,4,2,"li",27),e.qZA()(),e.TgZ(8,"td")(9,"span",28),e._uU(10),e.qZA()(),e.TgZ(11,"td",29),e.YNc(12,Z,2,0,"button",30),e.YNc(13,x,2,0,"button",31),e.qZA()()),2&n){const t=s.$implicit,i=e.oxw(4);let o,l;e.xp6(2),e.Oqu(t.type),e.xp6(2),e.AsE("",null==t.Employee||null==t.Employee.Account?null:t.Employee.Account.firstName," ",null==t.Employee||null==t.Employee.Account?null:t.Employee.Account.lastName,""),e.xp6(3),e.Q6J("ngForOf",t.RequestItems),e.xp6(2),e.Q6J("ngClass",e.kEZ(8,g,"Approved"===t.status,"Pending"===t.status,"Rejected"===t.status)),e.xp6(1),e.hij(" ",t.status," "),e.xp6(2),e.Q6J("ngIf","Admin"===(null==(o=i.account())?null:o.role)),e.xp6(1),e.Q6J("ngIf","Admin"===(null==(l=i.account())?null:l.role))}}function T(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",19)(2,"table",20)(3,"thead",21)(4,"tr",22)(5,"th"),e._uU(6,"Type"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Employee"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Items"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Status"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Actions"),e.qZA()()(),e.TgZ(15,"tbody"),e.YNc(16,A,14,12,"tr",23),e.qZA()()(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(16),e.Q6J("ngForOf",t.requests)}}function y(n,s){if(1&n&&(e.ynx(0),e.YNc(1,T,17,1,"ng-container",11),e.BQk()),2&n){const t=e.oxw(2),i=e.MAs(19);e.xp6(1),e.Q6J("ngIf",(null==t.requests?null:t.requests.length)>0)("ngIfElse",i)}}function C(n,s){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"span",32),e._uU(3),e.qZA()()),2&n){const t=s.$implicit;e.xp6(1),e.hij(" ",t.name," "),e.xp6(2),e.hij("(x",t.quantity,")")}}function M(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,l=e.oxw(4);return e.KtG(l.edit(o.id))}),e._uU(1," Edit "),e.qZA()}}function E(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,l=e.oxw(4);return e.KtG(l.delete(o.id))}),e._uU(1," Delete "),e.qZA()}}function I(n,s){if(1&n&&(e.TgZ(0,"div",37)(1,"div",38)(2,"div",39)(3,"h5",40),e._uU(4),e.qZA(),e.TgZ(5,"h6",41),e._uU(6),e.qZA(),e.TgZ(7,"p",42)(8,"strong"),e._uU(9,"Items:"),e.qZA()(),e.TgZ(10,"ul",43),e.YNc(11,C,4,2,"li",27),e.qZA(),e.TgZ(12,"span",28),e._uU(13),e.qZA()(),e.TgZ(14,"div",44),e.YNc(15,M,2,0,"button",45),e.YNc(16,E,2,0,"button",46),e.qZA()()()),2&n){const t=s.$implicit,i=e.oxw(4);let o,l;e.xp6(4),e.Oqu(t.type),e.xp6(2),e.AsE(" ",null==t.Employee||null==t.Employee.Account?null:t.Employee.Account.firstName," ",null==t.Employee||null==t.Employee.Account?null:t.Employee.Account.lastName," "),e.xp6(5),e.Q6J("ngForOf",t.RequestItems),e.xp6(1),e.Q6J("ngClass",e.kEZ(8,g,"Approved"===t.status,"Pending"===t.status,"Rejected"===t.status)),e.xp6(1),e.hij(" ",t.status," "),e.xp6(2),e.Q6J("ngIf","Admin"===(null==(o=i.account())?null:o.role)),e.xp6(1),e.Q6J("ngIf","Admin"===(null==(l=i.account())?null:l.role))}}function w(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",35),e.YNc(2,I,17,12,"div",36),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("ngForOf",t.requests)}}function N(n,s){if(1&n&&(e.ynx(0),e.YNc(1,w,3,1,"ng-container",11),e.BQk()),2&n){const t=e.oxw(2),i=e.MAs(19);e.xp6(1),e.Q6J("ngIf",(null==t.requests?null:t.requests.length)>0)("ngIfElse",i)}}function k(n,s){if(1&n&&(e.YNc(0,y,2,2,"ng-container",10),e.YNc(1,N,2,2,"ng-container",10)),2&n){const t=e.oxw();e.Q6J("ngIf","table"===t.viewMode),e.xp6(1),e.Q6J("ngIf","card"===t.viewMode)}}function J(n,s){1&n&&(e.TgZ(0,"div",49),e._UZ(1,"i",50),e._uU(2,"No requests found. "),e.qZA())}let U=(()=>{class n{constructor(t,i,o,l,c){this.requestService=t,this.accountService=i,this.router=o,this.route=l,this.alertService=c,this.requests=[],this.errorMessage="",this.isLoading=!1,this.viewMode="table"}ngOnInit(){const t=localStorage.getItem("requestViewMode");("card"===t||"table"===t)&&(this.viewMode=t),this.loadRequests()}setViewMode(t){this.viewMode=t,localStorage.setItem("requestViewMode",t)}loadRequests(){this.isLoading=!0,this.alertService.clear();const t=this.account();if(!t)return this.errorMessage="User not logged in.",this.alertService.error(this.errorMessage),void(this.isLoading=!1);("Admin"===t.role?this.requestService.getAll():this.requestService.getByEmployee(parseInt(t.id,10))).subscribe({next:o=>{this.requests=o,this.isLoading=!1,this.errorMessage=""},error:o=>{this.errorMessage=o.message,this.isLoading=!1,this.alertService.error(`${"Admin"===t.role?"Failed to load requests":"Failed to load your requests"}: ${o.message}`)}})}add(){this.router.navigate(["add"],{relativeTo:this.route})}edit(t){this.router.navigate(["edit",t],{relativeTo:this.route})}delete(t){confirm("Are you sure you want to delete this request?")&&this.requestService.delete(t).subscribe({next:()=>{this.alertService.success("Request deleted successfully"),this.loadRequests()},error:i=>this.alertService.error("Delete failed: "+i.message)})}account(){return this.accountService.accountValue}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.s),e.Y36(b.B),e.Y36(u.F0),e.Y36(u.gz),e.Y36(p.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-request-list"]],decls:20,vars:9,consts:[[1,"container","my-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"fw-bold","text-primary"],["role","group","aria-label","Display options",1,"btn-group"],[1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-table"],[1,"bi","bi-grid-3x3-gap"],[1,"d-flex","justify-content-end","mt-3"],[1,"btn","btn-success","btn-sm","px-4","py-2","fw-semibold","shadow-sm",3,"click"],[1,"bi","bi-plus-circle","me-1"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["dataSection",""],["noRequests",""],["role","alert"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"text-center","my-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"table-responsive","shadow","rounded-4"],[1,"table","table-hover","align-middle","mb-0","bg-white","rounded-4","overflow-hidden","animate__animated","animate__fadeIn"],[1,"table-dark"],[1,"text-center"],["class","text-center",4,"ngFor","ngForOf"],[1,"fw-semibold"],[1,"text-start"],[1,"list-unstyled","mb-0"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[1,"text-nowrap"],["class","btn btn-sm btn-outline-primary me-1 shadow-sm",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-danger shadow-sm",3,"click",4,"ngIf"],[1,"text-muted"],[1,"btn","btn-sm","btn-outline-primary","me-1","shadow-sm",3,"click"],[1,"btn","btn-sm","btn-outline-danger","shadow-sm",3,"click"],[1,"row","g-3","animate__animated","animate__fadeIn"],["class","col-md-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-4"],[1,"card","shadow-sm","h-100","border-0"],[1,"card-body"],[1,"card-title","text-primary"],[1,"card-subtitle","mb-2","text-muted"],[1,"mb-1"],[1,"mb-2"],[1,"card-footer","bg-transparent","border-0","d-flex","justify-content-end","gap-2"],["class","btn btn-sm btn-outline-primary",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"text-center","text-muted","py-4"],[1,"bi","bi-info-circle","me-2"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3,"Requests"),e.qZA(),e.TgZ(4,"div",3)(5,"button",4),e.NdJ("click",function(){return i.viewMode="table"}),e._UZ(6,"i",5),e.qZA(),e.TgZ(7,"button",4),e.NdJ("click",function(){return i.viewMode="card"}),e._UZ(8,"i",6),e.qZA()(),e.TgZ(9,"div",7)(10,"button",8),e.NdJ("click",function(){return i.add()}),e._UZ(11,"i",9),e._uU(12," Add Request "),e.qZA()()(),e.YNc(13,q,4,4,"ng-container",10),e.ALo(14,"async"),e.YNc(15,v,5,0,"ng-container",11),e.YNc(16,k,2,2,"ng-template",null,12,e.W1O),e.YNc(18,J,3,0,"ng-template",null,13,e.W1O),e.qZA()),2&t){const o=e.MAs(17);e.xp6(5),e.ekj("active","table"===i.viewMode),e.xp6(2),e.ekj("active","card"===i.viewMode),e.xp6(6),e.Q6J("ngIf",e.lcZ(14,7,i.alertService.alert)),e.xp6(2),e.Q6J("ngIf",i.isLoading)("ngIfElse",o)}},dependencies:[a.mk,a.sg,a.O5,a.Ov],encapsulation:2}),n})();var L=r(3030);function F(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",17),e._uU(2),e.TgZ(3,"button",18),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.alertService.clear())}),e.qZA()(),e.BQk()}if(2&n){const t=s.ngIf;e.xp6(1),e.Gre("alert alert-",t.type," alert-dismissible fade show"),e.xp6(1),e.hij(" ",t.message," ")}}function Q(n,s){if(1&n&&(e.TgZ(0,"option",22),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE(" ",t.firstName," ",t.lastName," ")}}function S(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"label",19),e._uU(2,"Employee:"),e.qZA(),e.TgZ(3,"select",20),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.request.employeeId=o)}),e.YNc(4,Q,2,3,"option",21),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.request.employeeId),e.xp6(1),e.Q6J("ngForOf",t.employees)}}function Y(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",25)(2,"div",26)(3,"label",6),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"input",27),e.NdJ("ngModelChange",function(o){const c=e.CHM(t).$implicit;return e.KtG(c.name=o)}),e.qZA()(),e.TgZ(6,"div",26)(7,"label",6),e._uU(8,"Quantity"),e.qZA(),e.TgZ(9,"input",28),e.NdJ("ngModelChange",function(o){const c=e.CHM(t).$implicit;return e.KtG(c.quantity=o)}),e.qZA()(),e.TgZ(10,"div",29)(11,"button",30),e.NdJ("click",function(){const l=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.removeItem(l))}),e._uU(12,"Remove"),e.qZA()()()()}if(2&n){const t=s.$implicit,i=s.index;e.xp6(5),e.MGl("name","itemName",i,""),e.Q6J("ngModel",t.name),e.xp6(4),e.MGl("name","itemQuantity",i,""),e.Q6J("ngModel",t.quantity)}}function R(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Y,13,4,"div",23),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.request.items)}}function O(n,s){1&n&&(e.TgZ(0,"p",31),e._uU(1,"No items added yet."),e.qZA())}let f=(()=>{class n{constructor(t,i,o,l,c){this.requestService=t,this.employeeService=i,this.route=o,this.router=l,this.alertService=c,this.id=null,this.request={type:"Equipment",employeeId:"",items:[],status:"Pending"},this.employees=[]}ngOnInit(){this.id=this.route.snapshot.params.id?+this.route.snapshot.params.id:null,this.employeeService.getAll().subscribe({next:t=>{this.employees=t,this.id?this.loadRequest():this.addItem()},error:t=>{this.alertService.error("Failed to load employees: "+t.message)}})}loadRequest(){this.requestService.getById(this.id).subscribe({next:t=>{this.request={type:t.type||"Equipment",employeeId:t.employeeId||"",status:t.status||"Pending",items:Array.isArray(t.RequestItems)&&t.RequestItems.length>0?t.RequestItems.map(i=>({name:i.name||"",quantity:i.quantity||1})):[{name:"",quantity:1}]}},error:t=>{this.alertService.error("Failed to load request: "+t.message)}})}addItem(){this.request.items.push({name:"",quantity:1})}removeItem(t){this.request.items.splice(t,1)}save(){const t=Object.assign({},this.request);this.id||delete t.employeeId,(this.id?this.requestService.update(this.id,t):this.requestService.create(t)).subscribe({next:()=>{this.alertService.success(`Request ${this.id?"updated":"created"} successfully!`),this.router.navigate(["/requests"])},error:o=>{this.alertService.error("Failed to save request: "+o.message)}})}cancel(){this.router.navigate(["/requests"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.s),e.Y36(L.G),e.Y36(u.gz),e.Y36(u.F0),e.Y36(p.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-request-add-edit"]],decls:40,vars:9,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[1,"form-label"],[1,"form-select",3,"ngModel","ngModelChange"],["name","status",1,"form-select",3,"ngModel","ngModelChange"],["value","Pending"],["value","Approved"],["value","Rejected"],[4,"ngIf","ngIfElse"],["noItems",""],[1,"btn","btn-secondary",3,"click"],[1,"text-center"],[1,"btn","btn-primary","me-2",3,"click"],["role","alert"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["for","employee",1,"form-label"],["name","employee",1,"form-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","border p-2 mb-2",4,"ngFor","ngForOf"],[1,"border","p-2","mb-2"],[1,"row"],[1,"col-md-5"],["type","text",1,"form-control",3,"ngModel","name","ngModelChange"],["type","number",1,"form-control",3,"ngModel","name","ngModelChange"],[1,"col-md-2","d-flex","align-items-end"],[1,"btn","btn-danger",3,"click"],[1,"text-muted"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,F,4,4,"ng-container",3),e.ALo(5,"async"),e.YNc(6,S,5,2,"div",4),e.TgZ(7,"div",5)(8,"label",6),e._uU(9,"Type"),e.qZA(),e.TgZ(10,"select",7),e.NdJ("ngModelChange",function(l){return i.request.type=l}),e.TgZ(11,"option"),e._uU(12,"Equipment"),e.qZA(),e.TgZ(13,"option"),e._uU(14,"Leave"),e.qZA(),e.TgZ(15,"option"),e._uU(16,"Resources"),e.qZA()()(),e.TgZ(17,"div",5)(18,"label",6),e._uU(19,"Status"),e.qZA(),e.TgZ(20,"select",8),e.NdJ("ngModelChange",function(l){return i.request.status=l}),e.TgZ(21,"option",9),e._uU(22,"Pending"),e.qZA(),e.TgZ(23,"option",10),e._uU(24,"Approved"),e.qZA(),e.TgZ(25,"option",11),e._uU(26,"Rejected"),e.qZA()()(),e.TgZ(27,"div",5)(28,"label",6),e._uU(29,"Items"),e.qZA(),e.YNc(30,R,2,1,"div",12),e.YNc(31,O,2,0,"ng-template",null,13,e.W1O),e.TgZ(33,"button",14),e.NdJ("click",function(){return i.addItem()}),e._uU(34,"Add Item"),e.qZA()(),e.TgZ(35,"div",15)(36,"button",16),e.NdJ("click",function(){return i.save()}),e._uU(37,"Save"),e.qZA(),e.TgZ(38,"button",14),e.NdJ("click",function(){return i.cancel()}),e._uU(39,"Cancel"),e.qZA()()()()),2&t){const o=e.MAs(32);e.xp6(2),e.hij("",i.id?"Edit":"Add"," Request"),e.xp6(2),e.Q6J("ngIf",e.lcZ(5,7,i.alertService.alert)),e.xp6(2),e.Q6J("ngIf",!1),e.xp6(4),e.Q6J("ngModel",i.request.type),e.xp6(10),e.Q6J("ngModel",i.request.status),e.xp6(10),e.Q6J("ngIf",(null==i.request.items?null:i.request.items.length)>0)("ngIfElse",o)}},dependencies:[a.sg,a.O5,_.YN,_.Kr,_.Fj,_.wV,_.EJ,_.JJ,_.On,a.Ov],encapsulation:2}),n})();const j=[{path:"",component:U},{path:"add",component:f},{path:"edit/:id",component:f}];let $=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.Bz.forChild(j),u.Bz]}),n})(),G=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[a.ez,_.u5,$]}),n})()}}]);