<div *ngIf="showModal" class="modal-backdrop-wrapper">
  <!-- Backdrop -->
  <div class="custom-backdrop"></div>

  <!-- Modal -->
  <div class="modal fade show d-block" tabindex="-1" role="dialog" aria-modal="true" aria-labelledby="employeeModalLabel">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content rounded-4 shadow">
        <div class="modal-header bg-primary text-white rounded-top-4">
          <h5 class="modal-title fw-semibold" id="employeeModalLabel">
            {{ id ? 'Edit' : 'Add' }} Employee
          </h5>
          <button type="button" class="btn-close" aria-label="Close" (click)="cancel()"></button>
        </div>

        <div class="modal-body bg-light p-4">
          <ng-container *ngIf="alertService.alert | async as alert">
            <div class="alert alert-{{ alert.type }} alert-dismissible fade show" role="alert">
              {{ alert.message }}
              <button type="button" class="btn-close" aria-label="Close" (click)="alertService.clear()"></button>
            </div>
          </ng-container>    

          <div class="mb-3">
            <label class="form-label fw-semibold">Account</label>
            <ng-container *ngIf="id; else selectAccount">
              <input type="text" class="form-control rounded-3 shadow-sm" [value]="getAccountEmail(employee.accountId)" disabled>
            </ng-container>
            <ng-template #selectAccount>
              <select class="form-select rounded-3 shadow-sm" [(ngModel)]="employee.accountId">
                <option *ngFor="let acc of accounts" [value]="acc.id">{{ acc.email }}</option>
              </select>
            </ng-template>
          </div>

          <div class="mb-3">
            <label class="form-label fw-semibold">Position</label>
            <input type="text" class="form-control rounded-3 shadow-sm" [(ngModel)]="employee.position">
          </div>

          <div class="mb-3">
            <label class="form-label fw-semibold">Department</label>
            <select class="form-select rounded-3 shadow-sm" [(ngModel)]="employee.departmentId">
              <option *ngFor="let dept of departments" [value]="dept.id">{{ dept.name }}</option>
            </select>
          </div>

          <div class="mb-3">
            <label class="form-label fw-semibold">Hire Date</label>
            <input type="date" class="form-control rounded-3 shadow-sm" [(ngModel)]="employee.hireDate" disabled>
          </div>

          <div class="mb-4">
            <label class="form-label fw-semibold">Status</label>
            <select class="form-select rounded-3 shadow-sm" [(ngModel)]="employee.status">
              <option>Active</option>
              <option>Inactive</option>
            </select>
          </div>
        </div>

        <div class="modal-footer">
          <button class="btn btn-success fw-semibold px-4 shadow-sm" (click)="save()">
            <i class="bi bi-check-circle me-1"></i> Save
          </button>
          <button class="btn btn-outline-secondary fw-semibold px-4 shadow-sm" (click)="cancel()">
            <i class="bi bi-x-circle me-1"></i> Cancel
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
